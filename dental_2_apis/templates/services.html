<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mediax - Topnav and Navbar</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='service.css') }}">
</head>
<body>
    <!-- Header Section (unchanged) -->
    <header>
        <div class="top-bar">
            <div class="contact-info">
                <span><i class="fas fa-phone-alt"></i> Phone: +163-654-3569</span>
                <span><i class="fas fa-envelope"></i> Email: info@mediax.com</span>
            </div>
            <div class="language-social">
                <span>Follow Us:</span>
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-linkedin-in"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
        <nav class="navbar">
            <div class="logo">
                <h1>Mediax</h1>
                <p>Health & Medical</p>
            </div>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="{{ url_for('about') }}">About Us</a></li>
                <li><a href="{{ url_for('services') }}">Service </a></li>
                <li><a href="{{ url_for('team') }}">Team</a></li>
                <li><a href="#">Blog </a></li>
                <li><a href="#" id="appointment-link">appointment</a></li>
                <li><a href="#" id="history-link">History</a></li>
                <li id="auth-link"><a href="/login" id="login-link">Login</a></li>
            </ul>
            <div class="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <!-- Updated Hero Section -->
    <section class="about-us-header">
        <div class="background-icons">
            <img src="{{ url_for('static', filename='icons/stethoscope-heart.png') }}" alt="Stethoscope Heart" class="icon stethoscope">
            <img src="{{ url_for('static', filename='icons/aboutus_bg.png') }}" alt="Green Arrow" class="icon arrow">
            <img src="{{ url_for('static', filename='icons/aboutus_bg-removebg-preview.png') }}" alt="Green Plus" class="icon plus">
        </div>
        <div class="content">
            <h1>Services</h1>
            <nav class="breadcrumbs">
                <a href="#">Home</a> > <a href="#">Services</a>
            </nav>
        </div>
    </section>


      <!-- Services Section -->
      <section class="specialties-section">
        <h2>Our Mediax Specialties</h2>
        <div class="specialties-grid">
            <div class="specialty-card">
                <div class="card-background" style="background-image: url({{ url_for('static', filename='images/Internal_Medicine.webp') }});"></div>
                <div class="icon-container">
                    <img src="{{ url_for('static', filename='icons/InternalMedicine_1.png') }}" alt="Default Icon" class="icon-default">
                    <img src="{{ url_for('static', filename='icons/InternalMedicine_2.png') }}" alt="Hover Icon" class="icon-hover">
                </div>
                <h3>Internal Medicine</h3>
                <p>30+ Doctors</p>
                <a href="#" class="read-more">Read More</a>
            </div>
            <div class="specialty-card">
                <div class="card-background" style="background-image: url({{ url_for('static', filename='images/Dental_Care.jpg') }});"></div>
                <div class="icon-container">
                    <img src="{{ url_for('static', filename='icons/Dental_Care_1.png') }}" alt="Default Icon" class="icon-default">
                    <img src="{{ url_for('static', filename='icons/Dental_Care_2.png') }}" alt="Hover Icon" class="icon-hover">
                </div>
                <h3>Dental Care</h3>
                <p>20+ Doctors</p>
                <a href="#" class="read-more">Read More</a>
            </div>
            <div class="specialty-card">
                <div class="card-background" style="background-image: url({{ url_for('static', filename='images/UrologyCare.webp') }});"></div>
                <div class="icon-container">
                    <img src="{{ url_for('static', filename='icons/Urologycare_1.png') }}" alt="Default Icon" class="icon-default">
                    <img src="{{ url_for('static', filename='icons/UrologyCare_2.png') }}" alt="Hover Icon" class="icon-hover">
                </div>
                <h3>Urology Care</h3>
                <p>20+ Doctors</p>
                <a href="#" class="read-more">Read More</a>
            </div>
            <div class="specialty-card">
                <div class="card-background" style="background-image: url({{ url_for('static', filename='images/NeurologyCare.jpeg') }});"></div>
                <div class="icon-container">
                    <img src="{{ url_for('static', filename='icons/NeurologyCare_1.png') }}" alt="Default Icon" class="icon-default">
                    <img src="{{ url_for('static', filename='icons/NeurologyCare_2.png') }}" alt="Hover Icon" class="icon-hover">
                </div>
                <h3>Neurology Care</h3>
                <p>10+ Doctors</p>
                <a href="#" class="read-more">Read More</a>
            </div>
            <div class="specialty-card">
                <div class="card-background" style="background-image: url({{ url_for('static', filename='images/Gynecologists.jpeg') }});"></div>
                <div class="icon-container">
                    <img src="{{ url_for('static', filename='icons/Gynecologists_1.png') }}" alt="Default Icon" class="icon-default">
                    <img src="{{ url_for('static', filename='icons/Gynecologists_1.png') }}" alt="Hover Icon" class="icon-hover">
                </div>
                <h3>Gynecologists</h3>
                <p>30+ Doctors</p>
                <a href="#" class="read-more">Read More</a>
            </div>
            <div class="specialty-card">
                <div class="card-background" style="background-image: url({{ url_for('static', filename='images/Ophthalmology.jpeg') }});"></div>
                <div class="icon-container">
                    <img src="{{ url_for('static', filename='icons/Ophthalmology_1.png') }}" alt="Default Icon" class="icon-default">
                    <img src="{{ url_for('static', filename='icons/Ophthalmology_2.webp') }}" alt="Hover Icon" class="icon-hover">
                </div>
                <h3>Ophthalmology</h3>
                <p>24+ Doctors</p>
                <a href="#" class="read-more">Read More</a>
            </div>
            <div class="specialty-card">
                <div class="card-background" style="background-image: url({{ url_for('static', filename='images/Orthopedics.jpeg') }});"></div>
                <div class="icon-container">
                    <img src="{{ url_for('static', filename='icons/Orthopedics_1.png') }}" alt="Default Icon" class="icon-default">
                    <img src="{{ url_for('static', filename='icons/Orthopedics_2.png') }}" alt="Hover Icon" class="icon-hover">
                </div>
                <h3>Orthopedics</h3>
                <p>26+ Doctors</p>
                <a href="#" class="read-more">Read More</a>
            </div>
            <div class="specialty-card">
                <div class="card-background" style="background-image: url({{ url_for('static', filename='images/Cardiology.jpeg') }});"></div>
                <div class="icon-container">
                    <img src="{{ url_for('static', filename='icons/Cardiology_1.webp') }}" alt="Default Icon" class="icon-default">
                    <img src="{{ url_for('static', filename='icons/Cardiology_2.png') }}" alt="Hover Icon" class="icon-hover">
                </div>
                <h3>Cardiology</h3>
                <p>20+ Doctors</p>
                <a href="#" class="read-more">Read More</a>
            </div>
        </div>
        
    </section>

    
 <!-- Offer Section -->
 <section class="offer-section">
    <div class="offer-content">
        <h1 class="fade-in">We Are Pleased To Offer You The Healthy.</h1>
        <a href="#" class="contact-btn fade-in">Contact Us Now</a>
    </div>
</section>

    
 

<div class="content"></div> <!-- Placeholder for main content -->
<footer class="footer">
    <div class="footer-container">
        <div class="footer-section">
            <div class="logo">
                <img src="{{ url_for('static', filename='icons/logopng.svg') }}" alt="Mediax Logo">
            </div>
            <h3>Mediax Health & Medical</h3>
            <p>Subscribe to our newsletter today to receive latest news administrate cost effective for tactical data.</p>
            <p><img src="{{ url_for('static', filename='icons/pin.png') }}" alt="Location Icon" width="26px"> 2478 Street City Ohio 90255</p>
            <p><img src="{{ url_for('static', filename='icons/mail.png') }}" alt="Email Icon"width="21px"> info@mediax.com</p>
            <p><img src="{{ url_for('static', filename='icons/phone-call.png') }}" alt="Phone Icon"width="21px"> +4402 763 282 46</p>
        </div>
        <div class="footer-section">
            <h3>Quick Links</h3>
            <ul>
                <li><a href="#">About Us</a></li>
                <li><a href="#">Terms of Use</a></li>
                <li><a href="#">Our Services</a></li>
                <li><a href="#">Help & FAQs</a></li>
                <li><a href="#">Blog</a></li>
                <li><a href="#">Privacy Policy</a></li>
                <li><a href="#">Contact Us</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>Popular Service</h3>
            <ul>
                <li><a href="#">Cardiology Care</a></li>
                <li><a href="#">Urgent Care</a></li>
                <li><a href="#">Orthopedic Care</a></li>
                <li><a href="#">Diagnosis</a></li>
                <li><a href="#">Gastroenterology</a></li>
                <li><a href="#">Therapy Department</a></li>
                <li><a href="#">Dental Service</a></li>
            </ul>
        </div>
        <div class="footer-section recent-posts">
            <h3>Recent Posts</h3>
            <div class="post">
                <img src="{{ url_for('static', filename='images/post_1.jpg') }}" alt="Post 1">
                <div class="text">
                    <h4>How Business Is Taking Over & What to Do About It</h4>
                    <span>21 Jun. 2024</span>
                </div>
            </div>
            <div class="post">
                <img src="{{ url_for('static', filename='images/post_2.avif') }}" alt="Post 2">
                <div class="text">
                    <h4>Health vs. Wealth Navigate Business in Medicine</h4>
                    <span>22 Jun. 2024</span>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        <p>Copyright Â© 2024 Mediax. All Rights Reserved.</p>
    </div>
</footer>

  <!-- Appointment Popup -->
  <div class="popup" id="appointment-popup">
    <div class="popup-content">
        <span class="close-btn" onclick="closePopup()"><i class="fas fa-times"></i></span>
        <h2>Create Appointment</h2>
        <form id="create-appointment-form">
            <div class="input-group">
                <label for="appointment-name">Name</label>
                <input type="text" id="appointment-name" required>
            </div>
            <div class="input-group">
                <label for="appointment-phone">Phone Number</label>
                <input type="tel" id="appointment-phone" required>
            </div>
            <div class="input-group">
                <label for="appointment-department">Department</label>
                <select id="appointment-department" required>
                    <option value="Cardiology">Cardiology</option>
                    <option value="Neurology">Neurology</option>
                    <option value="Orthopedics">Orthopedics</option>
                    <option value="Pediatrics">Pediatrics</option>
                    <option value="Dermatology">Dermatology</option>
                </select>
            </div>
            <div class="input-group">
                <label for="appointment-time">Time</label>
                <input type="time" id="appointment-time" required>
            </div>
            <div class="input-group">
                <label for="appointment-date">Date</label>
                <input type="date" id="appointment-date" required>
            </div>
            <div class="input-group">
                <label for="appointment-description">Description</label>
                <textarea id="appointment-description" rows="3" placeholder="Optional description of your issue"></textarea>
            </div>
            <button type="submit" class="submit-btn">Create Appointment</button>
            <p class="message" id="create-appointment-message" aria-live="polite"></p>
        </form>
    </div>
</div>

    <!-- JavaScript (unchanged) -->
    <script>
        // Menu toggle
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinks = document.querySelector('.nav-links');
        menuToggle.addEventListener('click', () => {
            menuToggle.classList.toggle('active');
            navLinks.classList.toggle('active');
        });

        // Navbar and top bar scroll behavior
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            const topBar = document.querySelector('.top-bar');
            const currentScroll = window.scrollY;

            if (currentScroll > lastScroll) {
                topBar.classList.add('hidden');
                navbar.classList.add('hidden');
            } else {
                topBar.classList.remove('hidden');
                navbar.classList.remove('hidden');
            }

            if (currentScroll > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }

            lastScroll = currentScroll <= 0 ? 0 : currentScroll;
        });

      
   // Fade-in observer
   document.addEventListener('DOMContentLoaded', () => {
            const elements = document.querySelectorAll('.fade-in');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, { threshold: 0.1 });

            elements.forEach(element => observer.observe(element));
        });



        // Update Navbar based on login status
        function updateNavbar() {
            const token = localStorage.getItem('token');
            const authLink = document.getElementById('auth-link');
            if (token) {
                authLink.innerHTML = '<a href="#" id="logout-link">Logout</a>';
                document.getElementById('logout-link').addEventListener('click', (e) => {
                    e.preventDefault();
                    localStorage.removeItem('token');
                    updateNavbar();
                    window.location.href = '/login';
                });
            } else {
                authLink.innerHTML = '<a href="/login" id="login-link">Login</a>';
            }
        }

        // Call updateNavbar on page load
        document.addEventListener('DOMContentLoaded', () => {
            updateNavbar();
        });

        // Popup handling
        const appointmentLink = document.getElementById('appointment-link');
        const appointmentPopup = document.getElementById('appointment-popup');

        appointmentLink.addEventListener('click', (e) => {
            e.preventDefault();
            const token = localStorage.getItem('token');
            if (!token) {
                alert('Please log in to create an appointment.');
                window.location.href = '/login';
                return;
            }
            appointmentPopup.style.display = 'flex';
        });

        function closePopup() {
            appointmentPopup.style.display = 'none';
            document.getElementById('create-appointment-form').reset();
            document.getElementById('create-appointment-message').textContent = '';
        }

        // Create Appointment Form
        document.getElementById('create-appointment-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const nameElement = document.getElementById('appointment-name');
            const phoneElement = document.getElementById('appointment-phone');
            const departmentElement = document.getElementById('appointment-department');
            const timeElement = document.getElementById('appointment-time');
            const dateElement = document.getElementById('appointment-date');
            const descriptionElement = document.getElementById('appointment-description');

            if (!nameElement || !phoneElement || !departmentElement || !timeElement || !dateElement || !descriptionElement) {
                console.error('One or more form elements not found:', {
                    nameElement, phoneElement, departmentElement, timeElement, dateElement, descriptionElement
                });
                showMessage('create-appointment-message', 'Error: Form elements not found. Please check the form.');
                return;
            }

            const name = nameElement.value.trim();
            const phone = phoneElement.value.trim();
            const department = departmentElement.value;
            const time = timeElement.value;
            const date = dateElement.value;
            const description = descriptionElement.value.trim();

            const token = localStorage.getItem('token');
            if (!token) {
                showMessage('create-appointment-message', 'Please log in to create an appointment.');
                return;
            }

            // Input validation
            if (!name || !phone || !department || !time || !date) {
                showMessage('create-appointment-message', 'Please fill in all required fields');
                return;
            }

            if (!phone.match(/^\d{10}$/)) {
                showMessage('create-appointment-message', 'Phone number must be a 10-digit number');
                return;
            }

            const today = new Date();
            const selectedDate = new Date(date);
            if (selectedDate < today.setHours(0, 0, 0, 0)) {
                showMessage('create-appointment-message', 'Date cannot be in the past');
                return;
            }

            try {
                const response = await fetch('http://localhost:5000/create-appointment', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ name, phone_number: phone, department, time, date, description })
                });

                // Log the response status and headers for debugging
                console.log('Response Status:', response.status);
                console.log('Response Headers:', response.headers.get('content-type'));

                // Check if the response is JSON
                const contentType = response.headers.get('content-type');
                if (!contentType || !contentType.includes('application/json')) {
                    const text = await response.text();
                    console.error('Non-JSON response received:', text);
                    throw new Error(`Server did not return JSON. Status: ${response.status}. Response: ${text.substring(0, 100)}...`);
                }

                const data = await response.json();
                showMessage('create-appointment-message', data.message, response.ok);
                if (response.ok) {
                    setTimeout(() => {
                        closePopup();
                        window.location.href = '/history';
                    }, 2000);
                }
            } catch (error) {
                console.error('Error creating appointment:', error);
                showMessage('create-appointment-message', `Error creating appointment: ${error.message}`);
            }
        });

        // History Link Handling
        const historyLink = document.getElementById('history-link');
        historyLink.addEventListener('click', (e) => {
            e.preventDefault();
            const token = localStorage.getItem('token');
            if (!token) {
                alert('Please log in to view appointment history.');
                window.location.href = '/login';
                return;
            }
            window.location.href = '/history';
        });

        // Show Message Function
        function showMessage(elementId, message, isSuccess = false) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
                element.classList.toggle('success', isSuccess);
                element.classList.toggle('error', !isSuccess);
            }
        }

          
    </script>
</body>
</html>